{"version":3,"file":"AuthContext.js","sourceRoot":"","sources":["../../src/context/AuthContext.tsx"],"names":[],"mappings":"AAAA,OAAO,KAAK,EAAE,EAAE,aAAa,EAAE,QAAQ,EAAE,SAAS,EAAa,MAAM,OAAO,CAAC;AAC7E,OAAO,YAAY,MAAM,2CAA2C,CAAC;AASrE,MAAM,CAAC,MAAM,WAAW,GAAG,aAAa,CAAmB;IACzD,KAAK,EAAE,IAAI;IACX,IAAI,EAAE,IAAI;IACV,OAAO,EAAE,GAAG,EAAE,GAAE,CAAC;IACjB,MAAM,EAAE,KAAK,IAAI,EAAE,GAAE,CAAC;CACvB,CAAC,CAAC;AAEH,MAAM,CAAC,MAAM,YAAY,GAAG,CAAC,EAAE,QAAQ,EAA2B,EAAE,EAAE;IACpE,MAAM,CAAC,KAAK,EAAE,QAAQ,CAAC,GAAG,QAAQ,CAAgB,IAAI,CAAC,CAAC;IACxD,MAAM,CAAC,IAAI,EAAE,OAAO,CAAC,GAAG,QAAQ,CAAgB,IAAI,CAAC,CAAC;IAEtD,SAAS,CAAC,GAAG,EAAE;QACb,MAAM,QAAQ,GAAG,KAAK,IAAI,EAAE;YAC1B,MAAM,WAAW,GAAG,MAAM,YAAY,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;YACxD,MAAM,UAAU,GAAG,MAAM,YAAY,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;YACtD,QAAQ,CAAC,WAAW,CAAC,CAAC;YACtB,OAAO,CAAC,UAAU,CAAC,CAAC;QACtB,CAAC,CAAC;QACF,QAAQ,EAAE,CAAC;IACb,CAAC,EAAE,EAAE,CAAC,CAAC;IAEP,MAAM,OAAO,GAAG,KAAK,EAAE,QAAuB,EAAE,OAAsB,EAAE,EAAE;QACxE,IAAI,QAAQ,EAAE,CAAC;YACb,MAAM,YAAY,CAAC,OAAO,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;YAC9C,MAAM,YAAY,CAAC,OAAO,CAAC,MAAM,EAAE,OAAO,IAAI,EAAE,CAAC,CAAC;QACpD,CAAC;aAAM,CAAC;YACN,MAAM,YAAY,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;YACvC,MAAM,YAAY,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;QACxC,CAAC;QACD,QAAQ,CAAC,QAAQ,CAAC,CAAC;QACnB,OAAO,CAAC,OAAO,CAAC,CAAC;IACnB,CAAC,CAAC;IAEF,MAAM,MAAM,GAAG,KAAK,IAAI,EAAE;QACxB,MAAM,YAAY,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;QACvC,MAAM,YAAY,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;QACtC,QAAQ,CAAC,IAAI,CAAC,CAAC;QACf,OAAO,CAAC,IAAI,CAAC,CAAC;IAChB,CAAC,CAAC;IAEF,OAAO,CACL,CAAC,WAAW,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,OAAO,EAAE,MAAM,EAAE,CAAC,CAC5D;MAAA,CAAC,QAAQ,CACX;IAAA,EAAE,WAAW,CAAC,QAAQ,CAAC,CACxB,CAAC;AACJ,CAAC,CAAC","sourcesContent":["import React, { createContext, useState, useEffect, ReactNode } from 'react';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\n\r\ninterface AuthContextProps {\r\n  token: string | null;\r\n  role: string | null;\r\n  setAuth: (token: string | null, role: string | null) => void;\r\n  logout: () => Promise<void>;\r\n}\r\n\r\nexport const AuthContext = createContext<AuthContextProps>({\r\n  token: null,\r\n  role: null,\r\n  setAuth: () => {},\r\n  logout: async () => {},\r\n});\r\n\r\nexport const AuthProvider = ({ children }: { children: ReactNode }) => {\r\n  const [token, setToken] = useState<string | null>(null);\r\n  const [role, setRole] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    const loadAuth = async () => {\r\n      const storedToken = await AsyncStorage.getItem('token');\r\n      const storedRole = await AsyncStorage.getItem('role');\r\n      setToken(storedToken);\r\n      setRole(storedRole);\r\n    };\r\n    loadAuth();\r\n  }, []);\r\n\r\n  const setAuth = async (newToken: string | null, newRole: string | null) => {\r\n    if (newToken) {\r\n      await AsyncStorage.setItem('token', newToken);\r\n      await AsyncStorage.setItem('role', newRole || '');\r\n    } else {\r\n      await AsyncStorage.removeItem('token');\r\n      await AsyncStorage.removeItem('role');\r\n    }\r\n    setToken(newToken);\r\n    setRole(newRole);\r\n  };\r\n\r\n  const logout = async () => {\r\n    await AsyncStorage.removeItem('token');\r\n    await AsyncStorage.removeItem('role');\r\n    setToken(null);\r\n    setRole(null);\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ token, role, setAuth, logout }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n"]}