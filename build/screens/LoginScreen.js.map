{"version":3,"file":"LoginScreen.js","sourceRoot":"","sources":["../../src/screens/LoginScreen.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect } from 'react';\r\nimport {\r\n  View,\r\n  Text,\r\n  TextInput,\r\n  TouchableOpacity,\r\n  StyleSheet,\r\n  KeyboardAvoidingView,\r\n  Platform,\r\n  ScrollView,\r\n  TouchableWithoutFeedback,\r\n  Keyboard,\r\n  Image,\r\n  Alert,\r\n} from 'react-native';\r\nimport { AuthContext } from '../context/AuthContext';\r\nimport { AuthService } from '../services/authService';\r\nimport { Ionicons } from '@expo/vector-icons';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport { Colors, Fonts } from '../constants/colors';\r\n\r\nexport default function LoginScreen({ navigation }: any) {\r\n  const { setAuth } = useContext(AuthContext);\r\n\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [rememberMe, setRememberMe] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [showPassword, setShowPassword] = useState(false);\r\n\r\n  // Load saved credentials on mount\r\n  useEffect(() => {\r\n    const loadSavedCredentials = async () => {\r\n      try {\r\n        const savedEmail = await AsyncStorage.getItem('savedEmail');\r\n        const savedPassword = await AsyncStorage.getItem('savedPassword');\r\n        if (savedEmail && savedPassword) {\r\n          setEmail(savedEmail);\r\n          setPassword(savedPassword);\r\n          setRememberMe(true);\r\n        }\r\n      } catch (err) {\r\n        console.error('Failed to load saved credentials', err);\r\n      }\r\n    };\r\n    loadSavedCredentials();\r\n  }, []);\r\n\r\n  const handleLogin = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const { token, role } = await AuthService.login(email, password);\r\n      setAuth(token, role);\r\n\r\n      // Save or remove credentials based on rememberMe\r\n      if (rememberMe) {\r\n        await AsyncStorage.setItem('savedEmail', email);\r\n        await AsyncStorage.setItem('savedPassword', password);\r\n      } else {\r\n        await AsyncStorage.removeItem('savedEmail');\r\n        await AsyncStorage.removeItem('savedPassword');\r\n      }\r\n    } catch (err) {\r\n      Alert.alert('Error', 'Invalid credentials');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n\r\n  return (\r\n    <KeyboardAvoidingView\r\n      style={{ flex: 1, backgroundColor: Colors.background }}\r\n      behavior={Platform.OS === 'ios' ? 'padding' : 'padding'}\r\n      keyboardVerticalOffset={Platform.OS === 'ios' ? 60 : 20}\r\n    >\r\n      <TouchableWithoutFeedback onPress={Keyboard.dismiss}>\r\n        <ScrollView\r\n          contentContainerStyle={styles.scrollContainer}\r\n          keyboardShouldPersistTaps=\"handled\"\r\n        >\r\n          <View style={styles.container}>\r\n            <Image\r\n              source={require('../../assets/logo.png')}\r\n              style={styles.logo}\r\n            />\r\n            <Text\r\n              style={{\r\n       fontSize: 28, // increase size\r\n    fontWeight: 'bold',\r\n    color: Colors.primary,\r\n    textAlign: 'center', // center horizontally\r\n    marginBottom: 30,\r\n              }}\r\n            >\r\n              JP-MM Engineering Dictionary\r\n            </Text>\r\n\r\n            {/* Email Label */}\r\n            <Text style={styles.label}>Email</Text>\r\n            <TextInput\r\n              placeholder=\"Email\"\r\n              placeholderTextColor={Colors.textSecondary}\r\n              style={styles.input}\r\n              value={email}\r\n              onChangeText={setEmail}\r\n              keyboardType=\"email-address\"\r\n              autoCapitalize=\"none\"\r\n            />\r\n\r\n            {/* Password Label */}\r\n            <Text style={styles.label}>Password</Text>\r\n            <View style={styles.passwordContainer}>\r\n              <TextInput\r\n                placeholder=\"Password\"\r\n                placeholderTextColor={Colors.textSecondary}\r\n                style={styles.inputPassword}\r\n                secureTextEntry={!showPassword}\r\n                value={password}\r\n                onChangeText={setPassword}\r\n              />\r\n              <TouchableOpacity\r\n                onPress={() => setShowPassword(!showPassword)}\r\n                style={styles.eyeIcon}\r\n              >\r\n                <Ionicons\r\n                  name={showPassword ? 'eye-off' : 'eye'}\r\n                  size={24}\r\n                  color={Colors.textSecondary}\r\n                />\r\n              </TouchableOpacity>\r\n            </View>\r\n\r\n            {/* Remember Me left-aligned */}\r\n            <TouchableOpacity\r\n              style={styles.rememberContainer}\r\n              onPress={() => setRememberMe(!rememberMe)}\r\n            >\r\n              <Ionicons\r\n                name={rememberMe ? 'checkbox' : 'square-outline'}\r\n                size={22}\r\n                color={Colors.primary}\r\n              />\r\n              <Text style={styles.rememberText}>Remember Me</Text>\r\n            </TouchableOpacity>\r\n\r\n            <TouchableOpacity\r\n              style={styles.button}\r\n              onPress={handleLogin}\r\n              disabled={loading}\r\n            >\r\n              <Text style={Fonts.button}>\r\n                {loading ? 'Logging in...' : 'Login'}\r\n              </Text>\r\n            </TouchableOpacity>\r\n\r\n\r\n            <TouchableOpacity\r\n              onPress={() => navigation.navigate('Register')}\r\n              style={{ marginTop: 20 }}\r\n            >\r\n              <Text style={{ color: Colors.primary }}>\r\n                Don't have an account? Register\r\n              </Text>\r\n            </TouchableOpacity>\r\n{/* \r\n            <TouchableOpacity\r\n              onPress={() => navigation.navigate('ForgotPassword')}\r\n              style={{ marginTop: 10 }}\r\n            >\r\n              <Text style={{ color: Colors.primary }}>Forgot Password?</Text>\r\n            </TouchableOpacity> */}\r\n          </View>\r\n        </ScrollView>\r\n      </TouchableWithoutFeedback>\r\n    </KeyboardAvoidingView>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  scrollContainer: {\r\n    flexGrow: 1,\r\n    justifyContent: 'center',\r\n  },\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: Colors.background,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    padding: 20,\r\n  },\r\n  logo: {\r\n    width: 120,\r\n    height: 120,\r\n    borderRadius: 60,\r\n    marginBottom: 20,\r\n  },\r\n  label: {\r\n    alignSelf: 'flex-start',\r\n    marginBottom: 5,\r\n    color: Colors.primary,\r\n    fontSize: 16,\r\n    fontWeight: '500',\r\n    marginLeft: 5,\r\n  },\r\n  input: {\r\n    width: '100%',\r\n    height: 50,\r\n    borderColor: Colors.grayBorder,\r\n    borderWidth: 1,\r\n    borderRadius: 10,\r\n    paddingHorizontal: 15,\r\n    marginBottom: 15,\r\n    backgroundColor: Colors.white,\r\n    color: Colors.primary,\r\n  },\r\n  passwordContainer: {\r\n    width: '100%',\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    borderColor: Colors.grayBorder,\r\n    borderWidth: 1,\r\n    borderRadius: 10,\r\n    backgroundColor: Colors.white,\r\n    marginBottom: 10,\r\n  },\r\n  inputPassword: {\r\n    flex: 1,\r\n    height: 50,\r\n    paddingHorizontal: 15,\r\n    color: Colors.primary,\r\n  },\r\n  eyeIcon: {\r\n    paddingHorizontal: 10,\r\n  },\r\n  button: {\r\n    width: '100%',\r\n    backgroundColor: Colors.primary,\r\n    paddingVertical: 15,\r\n    borderRadius: 10,\r\n    alignItems: 'center',\r\n    marginTop: 10,\r\n  },\r\n  rememberContainer: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    alignSelf: 'flex-start', // left align\r\n    marginBottom: 20,\r\n  },\r\n  rememberText: {\r\n    marginLeft: 8,\r\n    color: Colors.primary,\r\n    fontSize: 16,\r\n  },\r\n});\r\n"]}