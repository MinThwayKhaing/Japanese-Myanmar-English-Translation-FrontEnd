{"version":3,"file":"ProfileScreen.js","sourceRoot":"","sources":["../../src/screens/ProfileScreen.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\r\nimport {\r\n  View,\r\n  Text,\r\n  StyleSheet,\r\n  StatusBar,\r\n  TouchableOpacity,\r\n  ActivityIndicator,\r\n  ScrollView,\r\n  Platform,\r\n} from 'react-native';\r\nimport { SafeAreaView } from 'react-native-safe-area-context';\r\n\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport { UserService } from '../services/UserService';\r\nimport { AuthContext } from '../context/AuthContext';\r\nimport { resetTo } from '../navigation/RootNavigation';\r\nimport { Ionicons } from '@expo/vector-icons';\r\nimport { Colors } from '../constants/colors';\r\nimport { useNavigation } from '@react-navigation/native';\r\nconst ProfileScreen = () => {\r\n  const navigation = useNavigation<any>();\r\n  const { setAuth } = useContext(AuthContext);\r\n  const [user, setUser] = useState<any>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [token, setToken] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    const fetchUser = async () => {\r\n      const storedToken = await AsyncStorage.getItem('token');\r\n      if (!storedToken) {\r\n        setLoading(false);\r\n        return;\r\n      }\r\n      setToken(storedToken);\r\n      // Fetch user info here if API available\r\n      // For demo, we assume a simple getFavorites as placeholder for user info\r\n      try {\r\nconst data = await UserService.getProfile(storedToken);\r\nsetUser(data); // <-- directly use the API response\r\n\r\n      } catch (err) {\r\n        console.error('Failed to fetch user:', err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchUser();\r\n  }, []);\r\n\r\n  const onLogout = async () => {\r\n    await AsyncStorage.removeItem('token');\r\n    setAuth(null, null);\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <View style={styles.loadingContainer}>\r\n        <ActivityIndicator size=\"large\" color=\"#1A374D\" />\r\n      </View>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <SafeAreaView style={styles.safeContainer}>\r\n      <StatusBar barStyle=\"dark-content\" backgroundColor=\"#fff\" />\r\n\r\n      {/* Header */}\r\n      <View style={styles.header}>\r\n        <Text style={styles.headerText}>My Profile</Text>\r\n      </View>\r\n\r\n      {/* Body */}\r\n      <ScrollView contentContainerStyle={styles.body}>\r\n        {/* Account Section */}\r\n        <View style={styles.section}>\r\n          <Text style={styles.sectionTitle}>Account Details</Text>\r\n          <View style={styles.row}>\r\n            <Text style={styles.rowLabel}>Email:</Text>\r\n            <Text style={styles.rowValue}>{user?.email}</Text>\r\n          </View>\r\n        </View>\r\n\r\n        {/* Subscription Section */}\r\n        <View style={styles.section}>\r\n          <Text style={styles.sectionTitle}>Subscription</Text>\r\n          <View style={styles.row}>\r\n            <Text style={styles.rowLabel}>Status:</Text>\r\n            <Text style={styles.rowValue}>{user?.subscribed ? 'Active' : 'Inactive'}</Text>\r\n          </View>\r\n          {!user?.subscribed && (\r\n            <TouchableOpacity style={styles.upgradeButton}>\r\n              <Text style={styles.upgradeText}>Upgrade to Premium</Text>\r\n            </TouchableOpacity>\r\n          )}\r\n        </View>\r\n\r\n        {/* Security Section */}\r\n        <View style={styles.section}>\r\n          <Text style={styles.sectionTitle}>Security</Text>\r\n<TouchableOpacity\r\n  style={styles.upgradeButton}\r\n  onPress={() => navigation.navigate('ChangePassword')}\r\n>\r\n  <Text style={styles.upgradeText}>Change Password</Text>\r\n</TouchableOpacity>\r\n\r\n        </View>\r\n\r\n        {/* Logout Button */}\r\n        <TouchableOpacity style={styles.logoutButton} onPress={onLogout}>\r\n          <Ionicons name=\"log-out-outline\" size={20} color=\"#fff\" style={{ marginRight: 8 }} />\r\n          <Text style={styles.logoutText}>Logout</Text>\r\n        </TouchableOpacity>\r\n      </ScrollView>\r\n    </SafeAreaView>\r\n  );\r\n};\r\n\r\nexport default ProfileScreen;\r\n\r\nconst styles = StyleSheet.create({\r\n  safeContainer: {\r\n    flex: 1,\r\n    backgroundColor:  Colors.background,\r\n    paddingHorizontal: 16,\r\n    paddingTop: Platform.OS === 'android' ? 0 : 0,\r\n  },\r\n  loadingContainer: { flex: 1, justifyContent: 'center', alignItems: 'center' },\r\n  header: {\r\n    width: '100%',\r\n    paddingVertical: 12,\r\n    alignItems: 'center',\r\n    marginBottom: 8,\r\n    // backgroundColor removed\r\n  },\r\n  headerText: { fontSize: 22, fontWeight: 'bold', color: '#1A374D' },\r\n  body: { paddingHorizontal: 16, paddingBottom: 40 },\r\n  section: { \r\n    borderBottomWidth: 1, \r\n    borderBottomColor: '#ccc', \r\n    paddingVertical: 12,\r\n    backgroundColor: 'transparent', // remove white card\r\n  },\r\n  sectionTitle: { fontSize: 18, fontWeight: '600', color: '#1A374D', marginBottom: 8 },\r\n  row: { flexDirection: 'row', justifyContent: 'space-between', marginBottom: 4 },\r\n  rowLabel: { fontSize: 16, color: '#333' },\r\n  rowValue: { fontSize: 16, fontWeight: '500', color: '#555' },\r\n  upgradeButton: { marginTop: 6 },\r\n  upgradeText: { color: '#E6A4B4', fontWeight: '600', fontSize: 14 },\r\n  logoutButton: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    backgroundColor: '#1A374D', // changed to dark blue\r\n    paddingVertical: 12,\r\n    borderRadius: 8,\r\n    marginTop: 20,\r\n  },\r\n  logoutText: { color: '#fff', fontWeight: 'bold', fontSize: 16 },\r\n});\r\n"]}