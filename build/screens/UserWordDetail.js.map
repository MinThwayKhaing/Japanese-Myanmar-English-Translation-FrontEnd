{"version":3,"file":"UserWordDetail.js","sourceRoot":"","sources":["../../src/screens/UserWordDetail.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport {\r\n  View,\r\n  Text,\r\n  StyleSheet,\r\n  ActivityIndicator,\r\n  ScrollView,\r\n  TouchableOpacity,\r\n  Alert,\r\n  Platform,\r\n} from 'react-native';\r\nimport { SafeAreaView } from 'react-native-safe-area-context';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport { WordService, Word } from '../services/wordService';\r\nimport { UserService } from '../services/UserService';\r\nimport { Colors } from '../constants/colors';\r\nimport { Ionicons } from '@expo/vector-icons';\r\nimport { useRoute, useNavigation } from '@react-navigation/native';\r\n\r\nexport default function UserWordDetail() {\r\n  const route = useRoute<any>();\r\n  const navigation = useNavigation<any>();\r\n  const { id } = route.params;\r\n\r\n  const [word, setWord] = useState<Word | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [isFavorite, setIsFavorite] = useState(false);\r\n  const [token, setToken] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    const init = async () => {\r\n      const savedToken = await AsyncStorage.getItem('token');\r\n      if (!savedToken) return;\r\n      setToken(savedToken);\r\n\r\n      try {\r\n        const [wordData, favoritesData] = await Promise.all([\r\n          WordService.getWordByID(id, savedToken),\r\n          UserService.getFavorites(savedToken),\r\n        ]);\r\n\r\n        setWord(wordData);\r\n\r\n        const favList = Array.isArray(favoritesData) ? favoritesData : [];\r\n        setIsFavorite(favList.some((fav: any) => fav.id === id));\r\n      } catch (err) {\r\n        console.error('Failed to fetch word or favorites:', err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    init();\r\n  }, [id]);\r\n\r\n  const toggleFavorite = async () => {\r\n    if (!token) return;\r\n\r\n    try {\r\n      if (isFavorite) {\r\n        await UserService.removeFavorite(id, token);\r\n        setIsFavorite(false);\r\n      } else {\r\n        await UserService.addFavorite(id, token);\r\n        setIsFavorite(true);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating favorite:', error);\r\n      Alert.alert('Error', 'Failed to update favorite status.');\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <SafeAreaView style={styles.center}>\r\n        <ActivityIndicator size=\"large\" color={Colors.primary} />\r\n      </SafeAreaView>\r\n    );\r\n  }\r\n\r\n  if (!word) {\r\n    return (\r\n      <SafeAreaView style={styles.center}>\r\n        <Text style={styles.notFoundText}>Word not found.</Text>\r\n      </SafeAreaView>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <SafeAreaView style={styles.safeContainer}>\r\n      <ScrollView contentContainerStyle={{ padding: 16 }}>\r\n        <TouchableOpacity onPress={() => navigation.goBack()} style={styles.backBtn}>\r\n          <Ionicons name=\"arrow-back\" size={24} color={Colors.primary} />\r\n          <Text style={styles.backText}>Back</Text>\r\n        </TouchableOpacity>\r\n\r\n        <View style={styles.titleRow}>\r\n          <Text style={styles.title}>{word.japanese || '-'}</Text>\r\n          <TouchableOpacity onPress={toggleFavorite}>\r\n            <Ionicons\r\n              name={isFavorite ? 'heart' : 'heart-outline'}\r\n              size={28}\r\n              color={isFavorite ? 'red' : Colors.primary}\r\n            />\r\n          </TouchableOpacity>\r\n        </View>\r\n\r\n        {word.subTerm && <Text style={styles.subTerm}>({word.subTerm})</Text>}\r\n\r\n        <View style={styles.row}>\r\n          <Text style={styles.label}>English:</Text>\r\n          <Text style={styles.value}>{word.english || '-'}</Text>\r\n        </View>\r\n\r\n        {word.myanmar && (\r\n          <View style={styles.row}>\r\n            <Text style={styles.label}>Myanmar:</Text>\r\n            <Text style={styles.value}>{word.myanmar || '-'}</Text>\r\n          </View>\r\n        )}\r\n      </ScrollView>\r\n    </SafeAreaView>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  safeContainer: {\r\n    flex: 1,\r\n    backgroundColor: Colors.background,\r\n    paddingTop: Platform.OS === 'android' ? 0 : 0,\r\n  },\r\n  center: { flex: 1, justifyContent: 'center', alignItems: 'center', backgroundColor: Colors.background },\r\n  notFoundText: { fontSize: 18, color: Colors.grayLight },\r\n  backBtn: { flexDirection: 'row', alignItems: 'center', marginBottom: 20 },\r\n  backText: { fontSize: 16, color: Colors.primary, marginLeft: 6 },\r\n  titleRow: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    marginBottom: 10,\r\n  },\r\n  title: { fontSize: 28, fontWeight: 'bold', color: Colors.primary },\r\n  subTerm: { fontSize: 18, color: Colors.grayLight, marginBottom: 20 },\r\n  row: { flexDirection: 'row', marginBottom: 14 },\r\n  label: { fontWeight: 'bold', fontSize: 16, width: 100, color: Colors.primary },\r\n  value: { fontSize: 16, flex: 1, color: '#333' },\r\n});\r\n"]}